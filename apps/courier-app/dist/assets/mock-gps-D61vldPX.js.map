{"version":3,"file":"mock-gps-D61vldPX.js","sources":["../../src/lib/mock-gps.ts"],"sourcesContent":["/**\n * Mock GPS for local testing when browser geolocation is unavailable\n * Usage: In console, run: enableMockGPS() to simulate location tracking\n */\n\ninterface MockGPSConfig {\n  startLat: number;\n  startLng: number;\n  speed: number; // meters per second\n  heading: number; // degrees 0-360\n}\n\nconst DEFAULT_CONFIG: MockGPSConfig = {\n  startLat: 37.7749,\n  startLng: -122.4194,\n  speed: 5, // 5 m/s = 18 km/h\n  heading: 45,\n};\n\nlet mockWatchId = 1;\nconst mockWatches = new Map<number, NodeJS.Timer>();\n\nexport function enableMockGPS(config: Partial<MockGPSConfig> = {}) {\n  const fullConfig = { ...DEFAULT_CONFIG, ...config };\n  \n  console.log('ðŸŽ¯ Mock GPS enabled with config:', fullConfig);\n  \n  // Override navigator.geolocation.watchPosition\n  const originalWatchPosition = navigator.geolocation.watchPosition;\n  let currentLat = fullConfig.startLat;\n  let currentLng = fullConfig.startLng;\n  let heading = fullConfig.heading;\n  \n  navigator.geolocation.watchPosition = function(\n    successCallback,\n    errorCallback,\n    options\n  ) {\n    const watchId = mockWatchId++;\n    \n    // Simulate movement every 2 seconds\n    const interval = setInterval(() => {\n      // Move in the direction of heading\n      const latChange = (fullConfig.speed / 111000) * Math.sin(heading * Math.PI / 180);\n      const lngChange = (fullConfig.speed / 111000) * Math.cos(heading * Math.PI / 180);\n      \n      currentLat += latChange;\n      currentLng += lngChange;\n      \n      // Simulate slight heading changes for realism\n      heading = (heading + (Math.random() - 0.5) * 5) % 360;\n      \n      const mockPosition = {\n        coords: {\n          latitude: currentLat,\n          longitude: currentLng,\n          altitude: null,\n          accuracy: 5,\n          altitudeAccuracy: null,\n          heading: heading,\n          speed: fullConfig.speed,\n        },\n        timestamp: Date.now(),\n      } as GeolocationPosition;\n      \n      successCallback(mockPosition);\n    }, 2000);\n    \n    mockWatches.set(watchId, interval);\n    return watchId;\n  };\n  \n  navigator.geolocation.clearWatch = function(watchId: number) {\n    const interval = mockWatches.get(watchId);\n    if (interval) {\n      clearInterval(interval as NodeJS.Timeout);\n      mockWatches.delete(watchId);\n      console.log('ðŸŽ¯ Mock GPS watch cleared:', watchId);\n    }\n  };\n}\n\nexport function disableMockGPS() {\n  // Clear all mock intervals\n  mockWatches.forEach((interval) => clearInterval(interval as NodeJS.Timeout));\n  mockWatches.clear();\n  \n  // Restore original watchPosition\n  navigator.geolocation.watchPosition = navigator.geolocation.watchPosition;\n  \n  console.log('ðŸŽ¯ Mock GPS disabled');\n}\n\n// Make available in window for console access\n(window as any).enableMockGPS = enableMockGPS;\n(window as any).disableMockGPS = disableMockGPS;\n"],"names":["DEFAULT_CONFIG","mockWatchId","mockWatches","enableMockGPS","config","fullConfig","currentLat","currentLng","heading","successCallback","errorCallback","options","watchId","interval","latChange","lngChange","mockPosition","disableMockGPS"],"mappings":"AAYA,MAAMA,EAAgC,CACpC,SAAU,QACV,SAAU,UACV,MAAO,EACP,QAAS,EACX,EAEA,IAAIC,EAAc,EAClB,MAAMC,MAAkB,IAEjB,SAASC,EAAcC,EAAiC,GAAI,CACjE,MAAMC,EAAa,CAAE,GAAGL,EAAgB,GAAGI,CAAA,EAE3C,QAAQ,IAAI,mCAAoCC,CAAU,EAG5B,UAAU,YAAY,cACpD,IAAIC,EAAaD,EAAW,SACxBE,EAAaF,EAAW,SACxBG,EAAUH,EAAW,QAEzB,UAAU,YAAY,cAAgB,SACpCI,EACAC,EACAC,EACA,CACA,MAAMC,EAAUX,IAGVY,EAAW,YAAY,IAAM,CAEjC,MAAMC,EAAaT,EAAW,MAAQ,MAAU,KAAK,IAAIG,EAAU,KAAK,GAAK,GAAG,EAC1EO,EAAaV,EAAW,MAAQ,MAAU,KAAK,IAAIG,EAAU,KAAK,GAAK,GAAG,EAEhFF,GAAcQ,EACdP,GAAcQ,EAGdP,GAAWA,GAAW,KAAK,SAAW,IAAO,GAAK,IAElD,MAAMQ,EAAe,CACnB,OAAQ,CACN,SAAUV,EACV,UAAWC,EACX,SAAU,KACV,SAAU,EACV,iBAAkB,KAClB,QAAAC,EACA,MAAOH,EAAW,KAAA,EAEpB,UAAW,KAAK,IAAA,CAAI,EAGtBI,EAAgBO,CAAY,CAC9B,EAAG,GAAI,EAEP,OAAAd,EAAY,IAAIU,EAASC,CAAQ,EAC1BD,CACT,EAEA,UAAU,YAAY,WAAa,SAASA,EAAiB,CAC3D,MAAMC,EAAWX,EAAY,IAAIU,CAAO,EACpCC,IACF,cAAcA,CAA0B,EACxCX,EAAY,OAAOU,CAAO,EAC1B,QAAQ,IAAI,6BAA8BA,CAAO,EAErD,CACF,CAEO,SAASK,GAAiB,CAE/Bf,EAAY,QAASW,GAAa,cAAcA,CAA0B,CAAC,EAC3EX,EAAY,MAAA,EAGZ,UAAU,YAAY,cAAgB,UAAU,YAAY,cAE5D,QAAQ,IAAI,sBAAsB,CACpC,CAGC,OAAe,cAAgBC,EAC/B,OAAe,eAAiBc"}