(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[422],{747:(e,t,r)=>{"use strict";r.d(t,{m:()=>i});var n=r(912);let o=[{status:"open",label:"Job Posted"},{status:"assigned",label:"Courier Assigned"},{status:"enroute_pickup",label:"En Route to Pickup"},{status:"arrived_pickup",label:"Arrived at Pickup"},{status:"picked_up",label:"Package Picked Up"},{status:"enroute_dropoff",label:"En Route to Dropoff"},{status:"arrived_dropoff",label:"Arrived at Dropoff"},{status:"completed",label:"Completed"}];function i(e){let{currentStatus:t}=e,r=o.findIndex(e=>e.status===t);return(0,n.jsx)("div",{style:{padding:"20px 0"},children:(0,n.jsxs)("div",{style:{position:"relative"},children:[(0,n.jsx)("div",{style:{position:"absolute",top:"15px",left:"15px",right:"15px",height:"2px",background:"#e5e5e5",zIndex:0},children:(0,n.jsx)("div",{style:{height:"100%",background:"#6E56CF",width:r>=0?"".concat(r/(o.length-1)*100,"%"):"0%",transition:"width 0.3s ease"}})}),(0,n.jsx)("div",{style:{display:"flex",justifyContent:"space-between",position:"relative",zIndex:1},children:o.map((e,t)=>{let o=t<r,i=t===r;return(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[(0,n.jsx)("div",{style:{width:"30px",height:"30px",borderRadius:"50%",background:o||i?"#6E56CF":"#e5e5e5",border:i?"3px solid #6E56CF":"none",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"600",fontSize:"12px",transition:"all 0.3s ease",boxShadow:i?"0 0 0 4px rgba(110, 86, 207, 0.2)":"none"},children:o?"✓":i?"●":""}),(0,n.jsx)("div",{style:{marginTop:"8px",fontSize:"11px",textAlign:"center",color:i?"#6E56CF":o?"#333":"#999",fontWeight:i?"600":"400",maxWidth:"80px",lineHeight:"1.3"},children:e.label})]},e.status)})}),"cancelled"===t&&(0,n.jsx)("div",{style:{marginTop:"16px",padding:"12px",background:"#fee",border:"1px solid #fcc",borderRadius:"6px",color:"#c00",textAlign:"center",fontSize:"14px",fontWeight:"600"},children:"❌ Job Cancelled"})]})})}},1097:(e,t,r)=>{"use strict";r.d(t,{a:()=>i});var n=r(912),o=r(4012);function i(e){let{pickup:t,dropoff:i,courierLocation:l,height:s="400px"}=e,d=(0,o.useRef)(null),a=(0,o.useRef)(null),c=(0,o.useRef)({});return(0,o.useEffect)(()=>{let e="pk.eyJ1IjoiZ29zZW5kZXJyIiwiYSI6ImNtZjFlc2pkMTJheHIya29ub251YjZjMzQifQ.Oav2gJB_Z1sSPjOzjTPCzA";return e?((async()=>{if(!window.mapboxgl){let e=await r.e(670).then(r.t.bind(r,7283,23));window.mapboxgl=e.default}let n=window.mapboxgl;if(n.accessToken=e,!a.current&&d.current){let e=new n.Map({container:d.current,style:"mapbox://styles/mapbox/streets-v12",center:[t.lng,t.lat],zoom:12});a.current=e,e.on("load",()=>{c.current.pickup=new n.Marker({color:"#16a34a"}).setLngLat([t.lng,t.lat]).setPopup(new n.Popup().setHTML("<strong>Pickup</strong>".concat(t.label?"<br/>".concat(t.label):""))).addTo(e),c.current.dropoff=new n.Marker({color:"#dc2626"}).setLngLat([i.lng,i.lat]).setPopup(new n.Popup().setHTML("<strong>Dropoff</strong>".concat(i.label?"<br/>".concat(i.label):""))).addTo(e);let r=new n.LngLatBounds;r.extend([t.lng,t.lat]),r.extend([i.lng,i.lat]),e.fitBounds(r,{padding:50})})}})(),()=>{a.current&&(a.current.remove(),a.current=null)}):void console.warn("Mapbox token not found")},[t.lat,t.lng,i.lat,i.lng,t.label,i.label]),(0,o.useEffect)(()=>{if(!a.current)return;let e=window.mapboxgl;e&&(l&&l.lat&&l.lng?c.current.courier?c.current.courier.setLngLat([l.lng,l.lat]):c.current.courier=new e.Marker({color:"#2563eb"}).setLngLat([l.lng,l.lat]).setPopup(new e.Popup().setHTML("<strong>Courier</strong>")).addTo(a.current):c.current.courier&&(c.current.courier.remove(),c.current.courier=null))},[null==l?void 0:l.lat,null==l?void 0:l.lng]),(0,n.jsx)("div",{ref:d,style:{height:s,borderRadius:"8px"}})}},1444:(e,t,r)=>{"use strict";r.d(t,{J:()=>l});var n=r(4012),o=r(4555),i=r(9685);function l(e){let[t,r]=(0,n.useState)(null),[l,s]=(0,n.useState)(!0);return(0,n.useEffect)(()=>{if(!e){r(null),s(!1);return}let t=(0,o.H9)(i.db,"jobs",e),n=(0,o.aQ)(t,e=>{e.exists()?r(e.data()):r(null),s(!1)});return()=>n()},[e]),{job:t,loading:l}}},2849:(e,t,r)=>{Promise.resolve().then(r.bind(r,5073))},5046:(e,t,r)=>{"use strict";r.d(t,{t:()=>l});var n=r(912);let o={open:"#808080",assigned:"#2563eb",enroute_pickup:"#7c3aed",arrived_pickup:"#a855f7",picked_up:"#ea580c",enroute_dropoff:"#dc2626",arrived_dropoff:"#ef4444",completed:"#16a34a",cancelled:"#52525b"},i={open:"Open",assigned:"Assigned",enroute_pickup:"En Route to Pickup",arrived_pickup:"Arrived at Pickup",picked_up:"Picked Up",enroute_dropoff:"En Route to Dropoff",arrived_dropoff:"Arrived at Dropoff",completed:"Completed",cancelled:"Cancelled"};function l(e){let{status:t}=e;return(0,n.jsx)("span",{style:{display:"inline-block",padding:"4px 12px",borderRadius:"12px",fontSize:"12px",fontWeight:"600",color:"white",background:o[t],textTransform:"uppercase",letterSpacing:"0.5px"},children:i[t]})}},5073:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var n=r(912),o=r(5951),i=r(1444),l=r(4012),s=r(4555),d=r(9685),a=r(5046),c=r(747),u=r(1097),p=r(7274),x=r.n(p);function f(){var e,t,r,p;let f=(0,o.useParams)(),g=null==f?void 0:f.jobId,{job:h,loading:v}=(0,i.J)(g),{courier:b}=function(e){let[t,r]=(0,l.useState)(null),[n,o]=(0,l.useState)(!0);return(0,l.useEffect)(()=>{if(!e){r(null),o(!1);return}let t=(0,s.H9)(d.db,"users",e),n=(0,s.aQ)(t,e=>{e.exists()?r(e.data()):r(null),o(!1)});return()=>n()},[e]),{courier:t,loading:n}}((null==h?void 0:h.courierUid)||null);return v?(0,n.jsx)("div",{style:{padding:"30px"},children:(0,n.jsx)("p",{children:"Loading job..."})}):h?(0,n.jsxs)("div",{style:{padding:"30px",maxWidth:"1200px",margin:"0 auto"},children:[(0,n.jsx)("div",{style:{marginBottom:"20px"},children:(0,n.jsx)(x(),{href:"/v2/customer/jobs",style:{color:"#6E56CF",textDecoration:"none"},children:"← Back to My Jobs"})}),(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"30px"},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{style:{margin:0,marginBottom:"8px"},children:"Job Details"}),(0,n.jsxs)("div",{style:{color:"#666",fontSize:"14px"},children:["Created: ",(null==(r=h.createdAt)||null==(t=r.toDate)||null==(e=t.call(r))?void 0:e.toLocaleString())||"Just now"]})]}),(0,n.jsx)(a.t,{status:h.status})]}),(0,n.jsx)("div",{style:{marginBottom:"30px",padding:"20px",background:"white",borderRadius:"8px",border:"1px solid #ddd"},children:(0,n.jsx)(c.m,{currentStatus:h.status})}),(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"30px",marginBottom:"30px"},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{children:"Locations"}),(0,n.jsxs)("div",{style:{display:"grid",gap:"12px"},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"\uD83D\uDCCD Pickup"}),(0,n.jsx)("div",{style:{color:"#666",fontSize:"14px",marginTop:"4px"},children:h.pickup.label||"".concat(h.pickup.lat.toFixed(4),", ").concat(h.pickup.lng.toFixed(4))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"\uD83D\uDCCD Dropoff"}),(0,n.jsx)("div",{style:{color:"#666",fontSize:"14px",marginTop:"4px"},children:h.dropoff.label||"".concat(h.dropoff.lat.toFixed(4),", ").concat(h.dropoff.lng.toFixed(4))})]})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{children:"Job Info"}),(0,n.jsxs)("div",{style:{display:"grid",gap:"12px"},children:[h.agreedFee&&(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Delivery Fee"}),(0,n.jsxs)("div",{style:{fontSize:"20px",fontWeight:"600",color:"#16a34a",marginTop:"4px"},children:["$",h.agreedFee.toFixed(2)]})]}),h.courierUid?(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Courier"}),(0,n.jsx)("div",{style:{color:"#666",fontSize:"14px",marginTop:"4px"},children:(null==b||null==(p=b.courier)?void 0:p.isOnline)?(0,n.jsx)("span",{style:{color:"#16a34a"},children:"\uD83D\uDFE2 Online & Assigned"}):(0,n.jsx)("span",{style:{color:"#666"},children:"⚫ Assigned"})})]}):(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Status"}),(0,n.jsx)("div",{style:{color:"#666",fontSize:"14px",marginTop:"4px"},children:"Waiting for courier to accept..."})]})]})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{children:"Live Map"}),(0,n.jsx)(u.a,{pickup:h.pickup,dropoff:h.dropoff,courierLocation:(null==b?void 0:b.location)||null,height:"500px"}),h.courierUid&&!(null==b?void 0:b.location)&&(0,n.jsx)("p",{style:{color:"#999",fontSize:"14px",marginTop:"8px"},children:"Waiting for courier location updates..."})]})]}):(0,n.jsxs)("div",{style:{padding:"30px"},children:[(0,n.jsx)("p",{children:"Job not found"}),(0,n.jsx)(x(),{href:"/v2/customer/jobs",style:{color:"#6E56CF"},children:"← Back to My Jobs"})]})}},5951:(e,t,r)=>{"use strict";var n=r(4631);r.o(n,"useParams")&&r.d(t,{useParams:function(){return n.useParams}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}})},9685:(e,t,r)=>{"use strict";r.d(t,{db:()=>l,y:()=>i});var n=r(5941),o=r(4555);let i=(0,n.Dk)().length?(0,n.Sx)():(0,n.Wp)({apiKey:"AIzaSyAqfUspCXI4-IESvMHeu-7CV-BWjpWLSZ8",authDomain:"gosenderr-6773f.firebaseapp.com",projectId:"gosenderr-6773f",storageBucket:"gosenderr-6773f.firebasestorage.app",messagingSenderId:"92006199493",appId:"1:92006199493:web:6342270d7a40a312aa00ac"}),l=(0,o.aU)(i)}},e=>{e.O(0,[680,825,274,808,4,358],()=>e(e.s=2849)),_N_E=e.O()}]);