(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[151],{1082:(e,r,t)=>{"use strict";t.d(r,{h:()=>s});var o=t(9740);function s(){let{userDoc:e,loading:r,uid:t}=(0,o.T)();return{role:null==e?void 0:e.role,loading:r,uid:t,userDoc:e}}},4122:(e,r,t)=>{Promise.resolve().then(t.bind(t,5676))},4731:(e,r,t)=>{"use strict";t.d(r,{AuthGate:()=>u});var o=t(912),s=t(4012),n=t(5951),i=t(5284);function u(e){let{children:r}=e,{user:t,loading:u}=(0,i.Z)(),d=(0,n.useRouter)();return((0,s.useEffect)(()=>{u||t||d.push("/v2/login")},[t,u,d]),u)?(0,o.jsx)("div",{style:{padding:"50px",textAlign:"center"},children:(0,o.jsx)("p",{children:"Loading..."})}):t?(0,o.jsx)(o.Fragment,{children:r}):null}},5284:(e,r,t)=>{"use strict";t.d(r,{Z:()=>i});var o=t(4012),s=t(8213),n=t(7492);function i(){let[e,r]=(0,o.useState)(void 0);return(0,o.useEffect)(()=>{let e=(0,s.hg)(n.j2,e=>{r(e)});return()=>e()},[]),{user:e,loading:void 0===e,uid:null==e?void 0:e.uid}}},5676:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>p});var o=t(912),s=t(4012),n=t(5951),i=t(4555),u=t(9685),d=t(5284),a=t(1082),l=t(4731);function c(){let{uid:e}=(0,d.Z)(),{role:r,loading:t}=(0,a.h)(),l=(0,n.useRouter)(),[c,p]=(0,s.useState)(!1);(0,s.useEffect)(()=>{!t&&r&&("customer"===r?l.push("/v2/customer/jobs"):"courier"===r&&l.push("/v2/courier/dashboard"))},[r,t,l]);let x=async r=>{if(e&&!c){p(!0);try{let t=(0,i.H9)(u.db,"users",e),o=!(await (0,i.x7)(t)).exists(),s={role:r,updatedAt:(0,i.O5)()};o&&(s.createdAt=(0,i.O5)()),"courier"===r&&(s.courier={isOnline:!1,transportMode:"car",rateCard:{baseFee:5,perMile:1.5}}),await (0,i.BN)(t,s,{merge:!0}),"customer"===r?l.push("/v2/customer/jobs"):l.push("/v2/courier/setup")}catch(e){console.error("Failed to set role:",e),p(!1)}}};return t?(0,o.jsx)("div",{style:{padding:"50px",textAlign:"center"},children:(0,o.jsx)("p",{children:"Loading..."})}):r?null:(0,o.jsxs)("div",{style:{padding:"50px",maxWidth:"600px",margin:"0 auto",textAlign:"center"},children:[(0,o.jsx)("h1",{children:"Select Your Role"}),(0,o.jsx)("p",{style:{color:"#666",marginTop:"10px",marginBottom:"40px"},children:"Choose how you want to use GoSenderr"}),(0,o.jsxs)("div",{style:{display:"flex",gap:"24px",justifyContent:"center",flexWrap:"wrap"},children:[(0,o.jsxs)("button",{onClick:()=>x("customer"),disabled:c,style:{padding:"40px 30px",border:"2px solid #ddd",borderRadius:"12px",background:"white",cursor:c?"not-allowed":"pointer",minWidth:"200px",opacity:c?.6:1,transition:"all 0.2s"},onMouseEnter:e=>{c||(e.currentTarget.style.borderColor="#6E56CF",e.currentTarget.style.background="#f9f8ff")},onMouseLeave:e=>{c||(e.currentTarget.style.borderColor="#ddd",e.currentTarget.style.background="white")},children:[(0,o.jsx)("div",{style:{fontSize:"48px",marginBottom:"12px"},children:"\uD83D\uDCE6"}),(0,o.jsx)("h2",{style:{margin:"0 0 8px 0",fontSize:"24px"},children:"Customer"}),(0,o.jsx)("p",{style:{fontSize:"14px",color:"#666",margin:0},children:"Request deliveries for items you can't transport"})]}),(0,o.jsxs)("button",{onClick:()=>x("courier"),disabled:c,style:{padding:"40px 30px",border:"2px solid #ddd",borderRadius:"12px",background:"white",cursor:c?"not-allowed":"pointer",minWidth:"200px",opacity:c?.6:1,transition:"all 0.2s"},onMouseEnter:e=>{c||(e.currentTarget.style.borderColor="#6E56CF",e.currentTarget.style.background="#f9f8ff")},onMouseLeave:e=>{c||(e.currentTarget.style.borderColor="#ddd",e.currentTarget.style.background="white")},children:[(0,o.jsx)("div",{style:{fontSize:"48px",marginBottom:"12px"},children:"\uD83D\uDE97"}),(0,o.jsx)("h2",{style:{margin:"0 0 8px 0",fontSize:"24px"},children:"Courier"}),(0,o.jsx)("p",{style:{fontSize:"14px",color:"#666",margin:0},children:"Deliver items and set your own rates"})]})]}),c&&(0,o.jsx)("p",{style:{marginTop:"30px",color:"#999",fontSize:"14px"},children:"Setting up your account..."})]})}function p(){return(0,o.jsx)(l.AuthGate,{children:(0,o.jsx)(c,{})})}},5951:(e,r,t)=>{"use strict";var o=t(4631);t.o(o,"useParams")&&t.d(r,{useParams:function(){return o.useParams}}),t.o(o,"useRouter")&&t.d(r,{useRouter:function(){return o.useRouter}})},7492:(e,r,t)=>{"use strict";t.d(r,{j2:()=>n});var o=t(8213),s=t(9685);let n=(0,o.xI)(s.y)},9685:(e,r,t)=>{"use strict";t.d(r,{db:()=>i,y:()=>n});var o=t(5941),s=t(4555);let n=(0,o.Dk)().length?(0,o.Sx)():(0,o.Wp)({apiKey:"AIzaSyAqfUspCXI4-IESvMHeu-7CV-BWjpWLSZ8",authDomain:"gosenderr-6773f.firebaseapp.com",projectId:"gosenderr-6773f",storageBucket:"gosenderr-6773f.firebasestorage.app",messagingSenderId:"92006199493",appId:"1:92006199493:web:6342270d7a40a312aa00ac"}),i=(0,s.aU)(n)},9740:(e,r,t)=>{"use strict";t.d(r,{T:()=>u});var o=t(4012),s=t(4555),n=t(9685),i=t(5284);function u(){let{uid:e,loading:r}=(0,i.Z)(),[t,u]=(0,o.useState)(void 0),[d,a]=(0,o.useState)(!0);return(0,o.useEffect)(()=>{if(r)return void a(!0);if(!e){u(null),a(!1);return}let t=(0,s.aQ)((0,s.H9)(n.db,"users",e),e=>{e.exists()?u(e.data()):u(null),a(!1)},e=>{console.error("Error fetching user doc:",e),u(null),a(!1)});return()=>t()},[e,r]),{userDoc:t,loading:d,uid:e}}}},e=>{e.O(0,[680,661,825,846,808,4,358],()=>e(e.s=4122)),_N_E=e.O()}]);