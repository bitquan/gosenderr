#!/usr/bin/env bash

set -euo pipefail

# post-checkout args:
#   $1 previous HEAD
#   $2 new HEAD
#   $3 1 if branch checkout, 0 if file checkout
if [[ "${3:-0}" != "1" ]]; then
  exit 0
fi

repo_root="$(git rev-parse --show-toplevel 2>/dev/null || true)"
if [[ -z "${repo_root}" ]]; then
  exit 0
fi

cd "${repo_root}"

if [[ -x "scripts/setup-branch-copilot.sh" ]]; then
  bash scripts/setup-branch-copilot.sh >/dev/null 2>&1 || true
fi

